{% extends "project/post.html" %}
{% block title %}Job Postings{% endblock %}
<b>
    <h1>"All Job Postings"</h1>
</b>
{% block content %}
    {% if post_list %}
    <b>
        <h1><u>Job Postings</u></h1>
    </b>
        <ul>
        <br>
        <label for="d">Filter Posts:</label>
        <select name="filter" id="filter">
        <option value="all">All Posts</option>
        <option value="active">Active Posts Only</option>
        <option value="inactive">Inactive Posts Only</option>
        <option value="interested">Posts with at least 1 interested Candidate</option>
        </select>  
        <button onclick="myFunction()">Filter</button>
        <p id="demo"></p>
        <p id="printfiltered">
            <!--{% for post in post_list%}-->
            <li> 
                <a href="/{{ post.id }}/">{{post.position_title}}, 
                   <i>{{post.company}}</i>, 
                   {{post.location}}
                </a>
            </li>
            <!--{% endfor %}-->
        </p>

        <script>
            function myFunction() {
                // tried this first: var x = document.getElementById("filter").options.text;
                
                let selectElement = document.getElementById("filter");
                let value = selectElement.value;
                let text = selectElement.options[selectElement.selectedIndex].text;
                for (post in post_list) {
                    if (post.status == 'Active' && text == 'Active') {
                        document.getElementById("demo").innerHTML = document.getElementById("printfiltered");
                    }
                    else if(post.status == 'Inactive' && text == 'Inactive') {
                        document.getElementById("demo").innerHTML = document.getElementById("printfiltered");
                    }
                }  
            }
        
        </script>
        </ul>
    {% else %}
        <p>No jobs are available.</p>
    {% endif %}

{% endblock %}

